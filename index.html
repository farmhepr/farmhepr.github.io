<!DOCTYPE html>
<html lang="pt">
<head>
  <title>Stock AUX</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css" integrity="sha384-SI27wrMjH3ZZ89r4o+fGIJtnzkAnFs3E4qz9DIYioCQ5l9Rd/7UAa8DHcaL8jkWt" crossorigin="anonymous">
</head>
<body>
    <div w3-include-html="nav.html"></div>

  <div class="container-sm">
      <div class="form-row">
        <div class="col">
          <button id="authorize_button" class="btn btn-primary mb-2" style="display: none;">Login</button>
        </div>
        <div class="col">
          <button id="signout_button" class="btn btn-primary mb-2" style="display: none;">Logoff</button>
        </div>
      </div>

      <div class="form-group">
        <label>Código de barras</label>
        <div class="form-row">
          <div class="col-7">
            <input type="search" class="form-control" id="bar_code"/>
          </div>
          <div class="col">
            <button onclick="getSheet('BarCode!A2:D', updateFormBarCode)" class="btn btn-primary mb-2">Buscar</button>
          </div>
        </div>
        <select id="barCodeSelection" onchange="updateFormSelectBarCode()" style="width:100%;max-width:90%;"></select>

      </div>

      <div class="form-group">
        <label for="medInput">Medicamento</label>
        <input type="search" class="form-control" list="medicamentSelection" id='medInput' name="medicament" 
          onchange="getSheet('ProdutoLote!A2:D',updateFormMedName)">
        <datalist id="medicamentSelection">
        </datalist>
      </div>

      <div class="form-group">
        <label for="seriesInput">Lote</label>
        <input type="search" class="form-control" list="seriesSelection" id='seriesInput' name="series" onchange="valSel()">
        <datalist id="seriesSelection">
        </datalist>
      </div>

      <div class="form-group">
        <label for="valInput">Validade</label>
        <input type="search" class="form-control" list="valDateSelection" id='valInput' name="valDate">
        <datalist id="valDateSelection">
        </datalist>
      </div>

      <div class="form-group">
        <label for="qnt">Quantidade</label>
        <div class="form-row">
            <div class="col">
        <input type="search" class="form-control" type="number" id='qnt' name="qnt">
      </div>

          <div class="col">

      <button onclick="sendReg()" class="btn btn-primary">Enviar Saída</button>
    </div> 
    <div class="col">

      <button id="sendCodId" align="right" class="btn btn-primary" style="display: none;" onclick="sendCod()">Cadatrar Código</button>
    </div>      </div>
  </div>

  </div>

  <pre id="content" style="white-space: pre-wrap;"></pre>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="gsheets.js" type="text/javascript"></script>
  <script src="utility.js" type="text/javascript"></script>
  <script type="text/javascript">
    // var barCodeVal = getAllUrlParams().bar_code;
    includeHTML();
    // console.log(barCodeVal);
    // if(!(typeof (barCodeVal) === 'undefined')) {
    //   document.getElementById("bar_code").value = barCodeVal;
    // }
  </script>
  <script async defer src="https://apis.google.com/js/api.js"
    onload="this.onload=function(){};handleClientLoad(
      function(){
        initClient(function(){
        getSheet('Medicamentos!A2:A',updateMeds);
        var barCodeVal = getAllUrlParams().bar_code;
        console.log(barCodeVal);
        if(!(typeof (barCodeVal) === 'undefined')) {
          document.getElementById('bar_code').value = barCodeVal;
          var barCodeData = getSheet('BarCode!A2:D', updateFormBarCode);
        }
      });

        
        })"
    onreadystatechange="if (this.readyState === 'complete') this.onload()">
  </script>
</body>
</html>